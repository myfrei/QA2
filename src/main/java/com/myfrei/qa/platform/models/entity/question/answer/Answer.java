package com.myfrei.qa.platform.models.entity.question.answer;import com.myfrei.qa.platform.models.entity.question.Question;import com.myfrei.qa.platform.models.entity.user.User;import lombok.*;import org.hibernate.annotations.CreationTimestamp;import org.hibernate.annotations.Type;import org.hibernate.annotations.UpdateTimestamp;import org.hibernate.annotations.Where;import javax.persistence.*;import javax.validation.constraints.NotNull;import java.time.LocalDateTime;import java.util.Objects;@Entity@Getter@Setter@NoArgsConstructor@AllArgsConstructor@Builder@Table(name = "answer")@Where(clause = "is_deleted = false")public class Answer {    @Id    @GeneratedValue(strategy = GenerationType.IDENTITY)    private Long id;    @CreationTimestamp    @Column(name = "persist_date", updatable = false)    @Type(type = "org.hibernate.type.LocalDateTimeType")    private LocalDateTime persistDateTime;    @Column(name = "update_date", nullable = false)    @Type(type = "org.hibernate.type.LocalDateTimeType")    @UpdateTimestamp    private LocalDateTime updateDateTime;    @ManyToOne(fetch = FetchType.LAZY, optional = false)    @JoinColumn(name = "question_id")    private Question question;    @ManyToOne(fetch = FetchType.LAZY, optional = false)    @JoinColumn(name = "user_id")    private User user;    @Lob    @NotNull    @Column    private String htmlBody;    @NotNull    @Column(name = "is_helpful")    private Boolean isHelpful;    @NotNull    @Column(name = "is_deleted")    private Boolean isDeleted;    @Column(name = "date_accept_time")    @Type(type = "org.hibernate.type.LocalDateTimeType")    private LocalDateTime dateAcceptTime;    @PrePersist    private void prePersistFunction() {        checkConstraints();    }    @PreUpdate    private void preUpdateFunction() {        checkConstraints();    }    private void checkConstraints() {        try {            if (this.user.getId() <= 0) {                throw new EntityNotFoundException("User id must be > 0 on create or update.");            }        } catch (NullPointerException e) {            throw new EntityNotFoundException("User id must be not null on create.");        }    }    @Override    public boolean equals(Object o) {        if (this == o) return true;        if (o == null || getClass() != o.getClass()) return false;        Answer answer = (Answer) o;        return Objects.equals(id, answer.id) &&                Objects.equals(persistDateTime, answer.persistDateTime) &&                Objects.equals(updateDateTime, answer.updateDateTime) &&                Objects.equals(question, answer.question) &&                Objects.equals(user, answer.user) &&                Objects.equals(htmlBody, answer.htmlBody) &&                Objects.equals(isHelpful, answer.isHelpful) &&                Objects.equals(isDeleted, answer.isDeleted) &&                Objects.equals(dateAcceptTime, answer.dateAcceptTime)/* &&                Objects.equals(countValuable, answer.countValuable)*/;    }    @Override    public int hashCode() {        return Objects.hash(id, persistDateTime, updateDateTime, question, user, htmlBody, isHelpful, isDeleted, dateAcceptTime/*, countValuable*/);    }}